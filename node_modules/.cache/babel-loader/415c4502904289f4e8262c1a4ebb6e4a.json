{"ast":null,"code":"import _defineProperty from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Volumes/Data/React/react-api/src/pages/Orders/OrderActionPage.js\";\nimport React, { Component } from 'react';\nimport { CSSTransitionGroup } from 'react-transition-group';\nimport Button from '@material-ui/core/Button';\nimport { Link } from 'react-router-dom';\nimport * as config from '../../constants/config';\nimport callApi from '../../utils/apiCaller';\nimport OrderInfo from './../../components/Orders/OrderInfo';\nimport CustomerInfo from './../../components/Orders/CustomerInfo';\nimport AddDoctor from './../../components/Orders/AddDoctor';\nimport AddServices from './../../components/Orders/AddServices';\nimport AddRemainder from './../../components/Orders/AddRemainder';\nimport Modal from 'react-responsive-modal';\nimport Cleave from 'cleave.js/react';\nimport Swal from 'sweetalert2';\n\nvar OrderActionPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrderActionPage, _Component);\n\n  function OrderActionPage(props) {\n    var _this;\n\n    _classCallCheck(this, OrderActionPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderActionPage).call(this, props));\n\n    _this.onOpenModal = function (data) {\n      _this.setState({\n        order_id: data.order_id,\n        open: true\n      });\n    };\n\n    _this.onCloseModal = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.onCloseModalNote = function () {\n      _this.setState({\n        openNote: false\n      });\n    };\n\n    _this.handleDeleteService = function (id) {\n      callApi('DELETE', config.ORDER_DETAIL_URL + \"/\" + id, null).then(function (response) {\n        if (response && response.data.status) {\n          _this.getOrderDetail(_this.state.order.id);\n        }\n      });\n    };\n\n    _this.handleAddService = function (data_props) {\n      var product_service_id = data_props.product_service_id,\n          product_quantity = data_props.product_quantity;\n      var order = _this.state.order;\n      var data = {\n        order_id: order.id,\n        product_id: product_service_id,\n        quantity: product_quantity\n      };\n\n      if (product_service_id && product_service_id !== \"\") {\n        callApi('POST', config.ORDER_DETAIL_URL, data).then(function (res) {\n          _this.getOrderDetail(order.id);\n        });\n      } else {\n        Swal('Vui lòng chọn dịch vụ...', '', 'error');\n      }\n    };\n\n    _this.handleAddRemain = function (data_props) {\n      var time = data_props.date_remain;\n      var data = {\n        time: time,\n        is_send_sms: 0\n      };\n\n      if (time !== '') {\n        callApi('PUT', config.ORDER_URL + \"/\" + _this.state.order.id, data).then(function (res) {\n          if (res && res.data.status) {\n            _this.setState({\n              date_remain: time\n            });\n\n            Swal('Thành công!', 'Đặt lịch khám lại thành công', 'success');\n          }\n        });\n      } else {\n        Swal('Vui lòng chọn ngày gửi tin nhắn...', '', 'error');\n      }\n    };\n\n    _this.handleAddDoctor = function (user_id) {\n      var order = _this.state.order;\n\n      if (user_id !== null && user_id !== \"0\") {\n        var data = {\n          user_id: user_id\n        };\n        callApi('PUT', config.ORDER_URL + '/user/' + order.id, data).then(function (res) {\n          if (res.data.status) {\n            _this.setState({\n              doctor: res.data.data.user\n            });\n\n            Swal('Thành công!', 'Thêm bác sỹ khám thành công!', 'success');\n          }\n        });\n      } else {\n        Swal('Vui lòng chọn bác sỹ...', '', 'error');\n      }\n    };\n\n    _this.handleSetNoteDoctor = function (note) {\n      if (note && note !== '') {\n        var order = _this.state.order;\n        var data = {\n          note_user: note\n        };\n        console.log(config.ORDER_URL + \"/\" + order.id, data);\n        callApi('PUT', config.ORDER_URL + order.id, data).then(function (res) {\n          if (res.data.status) {\n            Swal('Thành công!', 'Thêm bác sỹ khám thành công!', 'success');\n          }\n        });\n      } else {\n        Swal('Vui lòng chọn bác sỹ...', '', 'error');\n      }\n    };\n\n    _this.handleSendSmsRemain = function () {\n      var id = _this.state.order.id;\n      var data = {\n        is_send_sms: 1,\n        time: null\n      };\n      callApi('GET', config.ORDERS_URL + \"/send-sms-order/\" + id, data).then(function (res) {\n        if (res) {\n          if (res.data.status) {\n            Swal('Thành công!', res.data.msg ? res.data.msg : 'Gửi tin nhắn thành công!', 'success');\n          } else {\n            Swal('Lỗi...', res.data.msg ? res.data.msg : 'Không thể gửi được tin nhắn', 'error');\n          }\n        } else {\n          Swal('Lỗi...', '', 'error');\n        }\n      });\n    };\n\n    _this.handleDeleteRemain = function () {\n      var id = _this.state.order.id;\n      var data = {\n        is_send_sms: true,\n        time: '0000-00-00 00:00:00'\n      };\n      callApi('PUT', config.ORDER_URL + \"/\" + id, data).then(function (res) {\n        if (res && res.data.status) {\n          _this.setState({\n            date_remain: '2018'\n          });\n\n          Swal('Xóa thành công!', '', 'success');\n        }\n      });\n    };\n\n    _this.handleChangePrice = function (id, title, price) {\n      _this.setState({\n        open: true,\n        order_detail_id: id,\n        product_title: title,\n        product_price: price\n      });\n    };\n\n    _this.onhandleNode = function (id, note, title) {\n      _this.setState({\n        openNote: true,\n        order_detail_id: id,\n        note: note ? note : '  ',\n        product_title: title\n      });\n    };\n\n    _this.onhandleSetPrice = function () {\n      var _this$state = _this.state,\n          order_detail_id = _this$state.order_detail_id,\n          product_price = _this$state.product_price;\n      var data = {\n        product_price: product_price.split(\",\").join(\"\")\n      };\n      callApi('PUT', config.ORDER_DETAIL_URL + \"/\" + order_detail_id, data).then(function (res) {\n        if (res && res.data.status) {\n          _this.setState({\n            open: false\n          });\n\n          _this.getOrderDetail(_this.state.order.id);\n\n          Swal('Cập nhật giá thành công!', '', 'success');\n        }\n      });\n    };\n\n    _this.handlesetnote = function () {\n      var _this$state2 = _this.state,\n          order_detail_id = _this$state2.order_detail_id,\n          note = _this$state2.note;\n      var data = {\n        note: note\n      };\n      callApi('PUT', config.ORDER_DETAIL_URL + \"/\" + order_detail_id, data).then(function (res) {\n        if (res && res.data.status) {\n          _this.setState({\n            openNote: false\n          });\n\n          _this.getOrderDetail(_this.state.order.id);\n\n          Swal('Cập nhật ghi chú thành công!', '', 'success');\n        }\n      });\n    };\n\n    _this.showBackLink = function (order_id) {\n      if (_this.state.role_id === config.ADMINISTRATOR || _this.state.role_id === config.MANAGER) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/orders\",\n          className: \"margin-right20\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"submit\",\n          className: \"btn btn-primary btn-cons\",\n          variant: \"fab\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"material-icons\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 325\n          },\n          __self: this\n        }, \"arrow_back\"))), React.createElement(Link, {\n          to: \"/orders/invoice/\" + _this.props.match.params.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328\n          },\n          __self: this\n        }, React.createElement(Button, {\n          type: \"submit\",\n          className: \"btn btn-primary btn-cons \",\n          variant: \"contained\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329\n          },\n          __self: this\n        }, \"H\\xF3a \\u0111\\u01A1n\")), React.createElement(Button, {\n          type: \"submit\",\n          className: \"btn btn-primary btn-cons\",\n          style: {\n            marginLeft: 20\n          },\n          onClick: function onClick() {\n            return _this.DeleteOrder(order_id);\n          },\n          variant: \"contained\",\n          color: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333\n          },\n          __self: this\n        }, \"X\\xF3a \\u0111\\u01A1n\"));\n      } // else {\n      // \treturn (\n      // \t\t<Link to=\"/customers\" className=\"margin-right20\">\n      // \t\t\t<Button type=\"submit\" className=\"btn btn-primary btn-cons\" variant=\"fab\" color=\"primary\" >\n      // \t\t\t<i className=\"material-icons\">arrow_back</i>\n      // \t\t\t</Button>\t\n      // \t\t</Link>\n      // \t);\n      // }\n\n    };\n\n    _this.state = {\n      service: '',\n      customer: '',\n      product: '',\n      product_quantity: 1,\n      order_detail_id: '',\n      product_title: '',\n      product_price: 0,\n      note: 'test',\n      customerData: '',\n      product_service_id: '',\n      categories: '',\n      products: '',\n      username: '',\n      order: '',\n      order_detail: '',\n      category_title: '',\n      date_remain: '',\n      // startDate: moment()\n      startDate: null,\n      doctor: '',\n      open: false,\n      openNote: false,\n      role_id: sessionStorage.getItem('authentication') ? JSON.parse(sessionStorage.getItem('authentication')).role_id : '',\n      service_id: ''\n    };\n    _this.onSave = _this.onSave.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeForm = _this.onChangeForm.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(OrderActionPage, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var match = this.props.match;\n\n      if (match) {\n        var _match$params = match.params,\n            id = _match$params.id,\n            customer_id = _match$params.customer_id;\n\n        if (id) {\n          // CustomerInfo \n          callApi('GET', config.CUSTOMER_URL + \"/\" + customer_id, null).then(function (response) {\n            if (response) {\n              _this2.setState({\n                customer: response.data.data\n              });\n            }\n          }); //UserInfo\n\n          callApi('GET', config.ORDER_URL + '/user/' + id, null).then(function (res) {\n            // console.log(res);\n            if (res.data.status) {\n              _this2.setState({\n                doctor: res.data.data.user\n              });\n            }\n          }); // OrderInfo\n\n          callApi('GET', config.ORDER_URL + \"/\" + id, null).then(function (res) {\n            if (res && res.data.data) {\n              _this2.setState({\n                order: res.data.data,\n                date_remain: res.data.data.time === null ? '' : res.data.data.time,\n                category_title: res.data.category.title,\n                service_id: res.data.data.product_category_id\n              });\n\n              var category_id = res.data.data.product_category_id;\n              callApi('GET', config.PRODUCT_URL + '/product-services/' + category_id, null).then(function (res) {\n                _this2.setState({\n                  categories: res.data.services,\n                  products: res.data.products\n                });\n              });\n              callApi('GET', config.USERS_URL + '/list-doctor', null).then(function (res) {\n                _this2.setState({\n                  username: res.data.data\n                });\n              });\n            }\n          });\n          this.getOrderDetail(id);\n        }\n      }\n    }\n  }, {\n    key: \"getOrderDetail\",\n    value: function getOrderDetail(id) {\n      var _this3 = this;\n\n      callApi('GET', config.ORDER_DETAIL_URL + \"/order/\" + id, null).then(function (res) {\n        if (res && res.data.status) {\n          _this3.setState({\n            order_detail: res.data.data,\n            time: res.data.data.time\n          });\n        }\n      });\n    }\n  }, {\n    key: \"onChangeForm\",\n    value: function onChangeForm(event) {\n      var target = event.target;\n      var name = target.name;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"onSave\",\n    value: function onSave(event) {\n      event.preventDefault();\n      var history = this.props.history;\n      var _this$state3 = this.state,\n          id = _this$state3.id,\n          sku = _this$state3.sku,\n          title = _this$state3.title,\n          price = _this$state3.price,\n          quantity = _this$state3.quantity,\n          unit = _this$state3.unit,\n          is_publish = _this$state3.is_publish;\n      var data = {\n        sku: sku,\n        title: title,\n        price: price,\n        quantity: quantity,\n        unit: unit,\n        is_publish: is_publish ? true : false\n      };\n\n      if (id) {\n        //update\n        callApi('PUT', config.ORDER_URL + \"/\" + id, data).then(function (res) {\n          console.log(res);\n          history.push(\"/orders\");\n        });\n      } else {\n        //create\n        callApi('POST', config.ORDER_URL, data).then(function (res) {\n          //C1 // history.push(\"/orders-list\");\n          // console.log(res);\n          // history.push(\"/orders\");\n          //C2: redirect \n          history.goBack();\n        });\n      }\n    }\n  }, {\n    key: \"DeleteOrder\",\n    value: function DeleteOrder(id) {\n      var history = this.props.history;\n      callApi('DELETE', config.ORDER_URL + \"/\" + id, null).then(function (res) {\n        if (res && res.data.status) {\n          history.push(\"/orders\");\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state4 = this.state,\n          order = _this$state4.order,\n          customer = _this$state4.customer,\n          order_detail = _this$state4.order_detail,\n          category_title = _this$state4.category_title,\n          date_remain = _this$state4.date_remain,\n          doctor = _this$state4.doctor,\n          categories = _this$state4.categories,\n          products = _this$state4.products,\n          username = _this$state4.username,\n          service_id = _this$state4.service_id;\n      return React.createElement(CSSTransitionGroup, {\n        transitionName: \"worksTransition\",\n        transitionAppear: true,\n        transitionAppearTimeout: 500,\n        transitionEnter: false,\n        transitionLeave: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, this.showBackLink(order.id), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      })), React.createElement(OrderInfo, {\n        order: order,\n        category_title: category_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }), React.createElement(CustomerInfo, {\n        customer: customer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }), React.createElement(AddDoctor, {\n        doctor: doctor,\n        username: username,\n        handleAddDoctor: this.handleAddDoctor,\n        handleSetNoteDoctor: this.handleSetNoteDoctor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }), React.createElement(AddServices, {\n        service_id: service_id,\n        categories: categories,\n        products: products,\n        order_detail: order_detail,\n        handleDeleteService: this.handleDeleteService,\n        handleAddService: this.handleAddService,\n        handleChangePrice: this.handleChangePrice,\n        onhandleNode: this.onhandleNode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }), React.createElement(AddRemainder, {\n        date_remain: date_remain,\n        handleAddRemain: this.handleAddRemain,\n        handleSendSmsRemain: this.handleSendSmsRemain,\n        handleDeleteRemain: this.handleDeleteRemain,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        open: this.state.open,\n        onClose: this.onCloseModal,\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: 400\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, \"D\\u1ECBch v\\u1EE5: \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, this.state.product_title, \" \")))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, \"Gi\\xE1\"), React.createElement(Cleave, {\n        className: \"input-numeral form-control\",\n        name: \"product_price\",\n        value: this.state.product_price,\n        options: {\n          numeral: true,\n          numeralThousandsGroupStyle: 'thousand'\n        },\n        onChange: this.onChangeForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: this.onhandleSetPrice,\n        type: \"submit\",\n        className: \"btn btn-primary btn-cons\",\n        variant: \"contained\",\n        color: \"secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, \"L\\u01B0u\"))), React.createElement(Modal, {\n        open: this.state.openNote,\n        onClose: this.onCloseModalNote,\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: 400\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, \"Ghi ch\\xFA: \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, this.state.product_title, \" \"))), React.createElement(\"input\", {\n        className: \"form-control\",\n        name: \"note\",\n        onChange: this.onChangeForm,\n        value: this.state.note,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: this.handlesetnote,\n        type: \"submit\",\n        className: \"btn btn-primary btn-cons\",\n        variant: \"contained\",\n        color: \"secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, \"L\\u01B0u\")))));\n    } // end render\n\n  }]);\n\n  return OrderActionPage;\n}(Component);\n\nexport default OrderActionPage;","map":{"version":3,"sources":["/Volumes/Data/React/react-api/src/pages/Orders/OrderActionPage.js"],"names":["React","Component","CSSTransitionGroup","Button","Link","config","callApi","OrderInfo","CustomerInfo","AddDoctor","AddServices","AddRemainder","Modal","Cleave","Swal","OrderActionPage","props","onOpenModal","data","setState","order_id","open","onCloseModal","onCloseModalNote","openNote","handleDeleteService","id","ORDER_DETAIL_URL","then","response","status","getOrderDetail","state","order","handleAddService","data_props","product_service_id","product_quantity","product_id","quantity","res","handleAddRemain","time","date_remain","is_send_sms","ORDER_URL","handleAddDoctor","user_id","doctor","user","handleSetNoteDoctor","note","note_user","console","log","handleSendSmsRemain","ORDERS_URL","msg","handleDeleteRemain","handleChangePrice","title","price","order_detail_id","product_title","product_price","onhandleNode","onhandleSetPrice","split","join","handlesetnote","showBackLink","role_id","ADMINISTRATOR","MANAGER","match","params","marginLeft","DeleteOrder","service","customer","product","customerData","categories","products","username","order_detail","category_title","startDate","sessionStorage","getItem","JSON","parse","service_id","onSave","bind","onChangeForm","customer_id","CUSTOMER_URL","category","product_category_id","category_id","PRODUCT_URL","services","USERS_URL","event","target","name","value","type","checked","preventDefault","history","sku","unit","is_publish","push","goBack","width","numeral","numeralThousandsGroupStyle"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { CSSTransitionGroup } from 'react-transition-group';\nimport Button from '@material-ui/core/Button';\nimport { Link } from 'react-router-dom';\nimport * as config from '../../constants/config';\nimport callApi from '../../utils/apiCaller';\nimport OrderInfo from './../../components/Orders/OrderInfo';\nimport CustomerInfo from './../../components/Orders/CustomerInfo';\nimport AddDoctor from './../../components/Orders/AddDoctor';\nimport AddServices from './../../components/Orders/AddServices';\nimport AddRemainder from './../../components/Orders/AddRemainder';\nimport Modal from 'react-responsive-modal';\nimport Cleave from 'cleave.js/react';\nimport Swal from 'sweetalert2'\n\nclass OrderActionPage extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tservice: '',\n\t\t\tcustomer: '',\n\t\t\tproduct: '',\n\t\t\tproduct_quantity: 1,\n\t\t\torder_detail_id: '',\n\t\t\tproduct_title: '',\n\t\t\tproduct_price: 0,\n\t\t\tnote: 'test',\n\t\t\tcustomerData: '',\n\t\t\tproduct_service_id: '',\n\t\t\tcategories: '',\n\t\t\tproducts: '',\n\t\t\tusername: '',\n\t\t\torder: '',\n\t\t\torder_detail: '',\n\t\t\tcategory_title: '',\n\t\t\tdate_remain: '',\n\t\t\t// startDate: moment()\n\t\t\tstartDate: null,\n\t\t\tdoctor: '',\n\t\t\topen: false, openNote: false,\n\t\t\trole_id: sessionStorage.getItem('authentication') ? JSON.parse(sessionStorage.getItem('authentication')).role_id : '',\n\t\t\tservice_id: '',\n\t\t};\n\t\tthis.onSave = this.onSave.bind(this);\n\t\tthis.onChangeForm = this.onChangeForm.bind(this);\n\t}\n\t\n\tcomponentWillMount(){\n\t\tvar {match} = this.props;\n\t\tif(match) {\n\t\t\tvar {id, customer_id} = match.params;\n\t\t\tif(id){\n\t\t\t\t// CustomerInfo \n\t\t\t\tcallApi('GET', config.CUSTOMER_URL  + \"/\" + customer_id, null).then(response => {\n\t\t\t\t\tif (response ){\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcustomer: response.data.data\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//UserInfo\n\t\t\t\tcallApi('GET', config.ORDER_URL + '/user/' + id, null).then(res => {\n\t\t\t\t\t// console.log(res);\n\t\t\t\t\tif ( res.data.status ) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tdoctor: res.data.data.user\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// OrderInfo\n\t\t\t\tcallApi('GET', config.ORDER_URL  + \"/\" + id, null).then(res => {\n\t\t\t\t\tif (res && res.data.data){\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\torder: res.data.data,\n\t\t\t\t\t\t\tdate_remain: res.data.data.time === null ? '' : res.data.data.time,\n\t\t\t\t\t\t\tcategory_title: res.data.category.title,\n\t\t\t\t\t\t\tservice_id: res.data.data.product_category_id\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar category_id = res.data.data.product_category_id;\n\t\t\t\t\t\n\t\t\t\t\t\tcallApi('GET', config.PRODUCT_URL+'/product-services/'+category_id, null).then(res => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tcategories: res.data.services,\n\t\t\t\t\t\t\t\tproducts: res.data.products\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallApi('GET', config.USERS_URL+'/list-doctor', null).then(res => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tusername: res.data.data\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t\n\t\t\t\tthis.getOrderDetail(id);\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\n\tgetOrderDetail(id){\n\t\tcallApi('GET', config.ORDER_DETAIL_URL+ \"/order/\" + id, null).then(res => {\n\t\t\tif(res && res.data.status){\n\t\t\t\tthis.setState({\n\t\t\t\t\torder_detail: res.data.data,\n\t\t\t\t\ttime: res.data.data.time\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonOpenModal = (data) => {\n\t\tthis.setState({ order_id: data.order_id , open: true });\n\t};\n\t\n\tonCloseModal = () => {\n\t\tthis.setState({ open: false });\n\t};\n\n\tonCloseModalNote = () => {\n\t\tthis.setState({ openNote: false });\n\t};\n\t\n\n\t\n\n\tonChangeForm (event) {\n\t\tvar target = event.target;\n\t\tvar name = target.name;\n\t\tvar value = target.type === 'checkbox'? target.checked:target.value;\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\t}\n\n\tonSave (event) {\n\t\tevent.preventDefault();\n\n\t\tvar {history} = this.props;\n\t\tvar {id, sku, title, price, quantity, unit, is_publish} = this.state;\n\t\tvar data = {sku: sku, title: title, price: price, quantity: quantity, unit: unit, is_publish: is_publish ? true : false };\n\t\tif(id) { //update\n\t\t\tcallApi('PUT', config.ORDER_URL  + \"/\" + id, data).then( res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\thistory.push(\"/orders\");\n\t\t\t});\n\t\t} else { //create\n\t\t\tcallApi('POST', config.ORDER_URL, data ).then( res => {\n\t\t\t\t//C1 // history.push(\"/orders-list\");\n\t\t\t\t// console.log(res);\n\t\t\t\t// history.push(\"/orders\");\n\t\t\t\t//C2: redirect \n\t\t\t\thistory.goBack();\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDeleteService = (id) => {\n\t\tcallApi('DELETE', config.ORDER_DETAIL_URL + \"/\" +id, null).then(response => {\n\t\t\tif(response && response.data.status){\n\t\t\t\tthis.getOrderDetail(this.state.order.id);\n\t\t\t}\n\t\t});\n\t}\n\n\thandleAddService = (data_props) => {\n\t\tvar {product_service_id, product_quantity}  = data_props;\n\t\tvar {order}  = this.state;\n\t\tvar data = {order_id: order.id, product_id : product_service_id, quantity: product_quantity}\n\t\tif (product_service_id && product_service_id !== \"\"){\n\t\t\tcallApi('POST', config.ORDER_DETAIL_URL, data).then(res => {\n\t\t\t\tthis.getOrderDetail(order.id)\n\t\t\t});\n\t\t} else {\n\t\t\tSwal('Vui lòng chọn dịch vụ...', '', 'error')\n\t\t}\n\t}\n\n\thandleAddRemain = (data_props) => {\n\n\t\tvar time = data_props.date_remain;\n\t\tvar data = {time: time, is_send_sms: 0}\n\t\tif( time !== ''){\n\t\t\tcallApi('PUT', config.ORDER_URL  + \"/\" + this.state.order.id, data).then(res => {\n\t\t\t\tif(res && res.data.status){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tdate_remain: time\n\t\t\t\t\t});\n\t\t\t\t\tSwal('Thành công!','Đặt lịch khám lại thành công','success')\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tSwal('Vui lòng chọn ngày gửi tin nhắn...', '', 'error')\n\t\t}\n\t}\n\n\thandleAddDoctor = (user_id) => {\n\t\tvar { order } = this.state;\n\t\tif( user_id !== null && user_id !== \"0\") {\n            var data = {user_id: user_id};\n            callApi('PUT', config.ORDER_URL + '/user/' + order.id, data).then(res => {\n                if ( res.data.status ) {\n                    this.setState({\n                        doctor: res.data.data.user\n                    });\n                    Swal('Thành công!','Thêm bác sỹ khám thành công!','success')\n                }\n            });\n        } else {\n            Swal('Vui lòng chọn bác sỹ...', '', 'error')\n        }\n\t}\n\n\thandleSetNoteDoctor = (note) => {\n\t\tif(note && note !== ''){\n\t\t\tvar { order } = this.state;\n\t\t\tvar data = {note_user: note}\n\t\t\tconsole.log(config.ORDER_URL +\"/\"+ order.id, data);\n\t\t\t\tcallApi('PUT', config.ORDER_URL + order.id, data).then(res => {\n\t\t\t\t\tif ( res.data.status ) {\n\t\t\t\t\t\tSwal('Thành công!','Thêm bác sỹ khám thành công!','success')\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tSwal('Vui lòng chọn bác sỹ...', '', 'error')\n\t\t}\n\t\t\n\t}\n\n\thandleSendSmsRemain = () => {\n\t\tvar { id } = this.state.order;\n\t\tvar data = { is_send_sms: 1, time: null};\n\t\tcallApi('GET', config.ORDERS_URL + \"/send-sms-order/\" + id, data).then(res => {\n\t\t\tif(res) {\n\t\t\t\tif( res.data.status ){\n\t\t\t\t\tSwal('Thành công!', res.data.msg ? res.data.msg : 'Gửi tin nhắn thành công!','success')\n\t\t\t\t} else {\n\t\t\t\t\tSwal('Lỗi...', res.data.msg ? res.data.msg : 'Không thể gửi được tin nhắn', 'error')\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tSwal('Lỗi...', '', 'error')\n\t\t\t}\n\t\t});\n\t}\n\n\thandleDeleteRemain = () => {\n\t\tvar { id } = this.state.order;\n\t\tvar data = { is_send_sms: true, time: '0000-00-00 00:00:00'};\n\t\tcallApi('PUT', config.ORDER_URL  + \"/\" + id, data).then(res => {\n\t\t\tif(res && res.data.status){\n\t\t\t\tthis.setState({\n\t\t\t\t\tdate_remain: '2018'\n\t\t\t\t});\n\t\t\t\tSwal('Xóa thành công!','','success')\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChangePrice = (id, title, price) => {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\torder_detail_id: id,\n\t\t\tproduct_title: title,\n\t\t\tproduct_price: price\n\t\t});\n\t}\n\n\tonhandleNode = (id, note, title) => {\n\t\tthis.setState({\n\t\t\topenNote: true,\n\t\t\torder_detail_id: id,\n\t\t\tnote: note ? note : '  ',\n\t\t\tproduct_title: title,\n\t\t});\n\t\n\t\t\n\t}\n\n\tonhandleSetPrice = () => {\n\t\tvar {order_detail_id, product_price} = this.state;\n\t\tvar data = {product_price: product_price.split(\",\").join(\"\")};\n\t\tcallApi('PUT', config.ORDER_DETAIL_URL  + \"/\" + order_detail_id, data).then(res => {\n\t\t\tif(res && res.data.status){\n\t\t\t\tthis.setState({\n\t\t\t\t\topen: false\n\t\t\t\t});\n\t\t\t\tthis.getOrderDetail(this.state.order.id)\n\t\t\t\tSwal('Cập nhật giá thành công!','','success')\n\t\t\t}\n\t\t});\n\t} \n\n\thandlesetnote = () => {\n\t\tvar {order_detail_id, note} = this.state;\n\t\tvar data = {note: note};\n\t\tcallApi('PUT', config.ORDER_DETAIL_URL  + \"/\" + order_detail_id, data).then(res => {\n\t\t\tif(res && res.data.status){\n\t\t\t\tthis.setState({\n\t\t\t\t\topenNote: false\n\t\t\t\t});\n\t\t\t\tthis.getOrderDetail(this.state.order.id)\n\t\t\t\tSwal('Cập nhật ghi chú thành công!','','success')\n\t\t\t}\n\t\t});\n\t}\n\n\tDeleteOrder (id) {\n\t\tvar {history} = this.props;\n\t\tcallApi('DELETE', config.ORDER_URL + \"/\" +id, null).then(res => {\n\t\t\tif(res && res.data.status){\n\t\t\t\thistory.push(\"/orders\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\n\tshowBackLink = (order_id) => {\n\t\tif(this.state.role_id === config.ADMINISTRATOR || this.state.role_id === config.MANAGER ){\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<Link to=\"/orders\" className=\"margin-right20\">\n\t\t\t\t\t\t<Button type=\"submit\" className=\"btn btn-primary btn-cons\" variant=\"fab\" color=\"primary\" >\n\t\t\t\t\t\t<i className=\"material-icons\">arrow_back</i>\n\t\t\t\t\t\t</Button>\t\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Link to={\"/orders/invoice/\"+ this.props.match.params.id}>\n\t\t\t\t\t\t<Button type=\"submit\" className=\"btn btn-primary btn-cons \" variant=\"contained\" color=\"primary\" >\n\t\t\t\t\t\t\tHóa đơn\n\t\t\t\t\t\t</Button>\t\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Button type=\"submit\" className=\"btn btn-primary btn-cons\" style={{marginLeft: 20}} onClick={() => this.DeleteOrder(order_id)} variant=\"contained\" color=\"secondary\" >\n\t\t\t\t\t\tXóa đơn\n\t\t\t\t\t</Button>\t\n\t\t\t\t</div>\n\t\t\t);\n\t\t} \n\t\t// else {\n\t\t// \treturn (\n\t\t// \t\t<Link to=\"/customers\" className=\"margin-right20\">\n\t\t// \t\t\t<Button type=\"submit\" className=\"btn btn-primary btn-cons\" variant=\"fab\" color=\"primary\" >\n\t\t// \t\t\t<i className=\"material-icons\">arrow_back</i>\n\t\t// \t\t\t</Button>\t\n\t\t// \t\t</Link>\n\t\t// \t);\n\t\t// }\n\t}\n\n\trender() {\n\t\tvar { order, customer, order_detail, category_title, date_remain, doctor, categories, products,username, service_id } = this.state;\n\t\t\n\t\treturn (\n\n\t\t\t<CSSTransitionGroup transitionName=\"worksTransition\" transitionAppear={true} transitionAppearTimeout={500} transitionEnter={false} transitionLeave={false}>\n\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"col-lg-12 col-md-12\">\n\t\t\t\t\t\n\t\t\t\t\t\t{this.showBackLink(order.id)}\n\n\t\t\t\t\t\t\n\t\t\t\t\t\t<p></p>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<OrderInfo order={order} category_title={category_title}/>\n\t\t\t\t\t\n\t\t\t\t\t<CustomerInfo customer={customer} />\n\t\t\t\t\t\n\t\t\t\t\t<AddDoctor doctor={doctor} username={username} handleAddDoctor={this.handleAddDoctor} handleSetNoteDoctor={this.handleSetNoteDoctor}/>\n\n\t\t\t\t\t<div className=\"clearfix\"></div>\n\n\t\t\t\t\t<AddServices \n\t\t\t\t\t\tservice_id={service_id}\n\t\t\t\t\t\tcategories={categories} \n\t\t\t\t\t\tproducts={products}\n\t\t\t\t\t\torder_detail={order_detail} \n\t\t\t\t\t\thandleDeleteService={this.handleDeleteService} \n\t\t\t\t\t\thandleAddService={this.handleAddService}\n\t\t\t\t\t\thandleChangePrice={this.handleChangePrice}\n\t\t\t\t\t\tonhandleNode={this.onhandleNode}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* add date remain */}\n\t\t\t\t\t<div className=\"clearfix\"></div>\n\t\t\t\t\t<AddRemainder \n\t\t\t\t\t\tdate_remain={date_remain} \n\t\t\t\t\t\thandleAddRemain={this.handleAddRemain} \n\t\t\t\t\t\thandleSendSmsRemain={this.handleSendSmsRemain}\n\t\t\t\t\t\thandleDeleteRemain={this.handleDeleteRemain}\n\t\t\t\t\t/>\n\t\t\t\t\t<Modal open={this.state.open} onClose={this.onCloseModal} center>\n\t\t\t\t\t\t<div style={{width:400}}>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Dịch vụ: <strong><span>{this.state.product_title} </span></strong></label>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Giá</label>\n\t\t\t\t\t\t\t\t<Cleave className=\"input-numeral form-control\" \n\t\t\t\t\t\t\t\t\tname=\"product_price\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.product_price} \n\t\t\t\t\t\t\t\t\toptions={{numeral: true, numeralThousandsGroupStyle: 'thousand'}}\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeForm}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button onClick={this.onhandleSetPrice} type=\"submit\" className=\"btn btn-primary btn-cons\" variant=\"contained\" color=\"secondary\" >\n\t\t\t\t\t\t\t\tLưu\n\t\t\t\t\t\t\t</Button>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal>\t\n\t\t\t\t\t<Modal open={this.state.openNote} onClose={this.onCloseModalNote} center>\n\t\t\t\t\t\t<div style={{width:400}}>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Ghi chú: <strong><span>{this.state.product_title} </span></strong></label>\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tname=\"note\"\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeForm}\n\t\t\t\t\t\t\t\t\tvalue={this.state.note}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button onClick={ this.handlesetnote} type=\"submit\" className=\"btn btn-primary btn-cons\" variant=\"contained\" color=\"secondary\" >\n\t\t\t\t\t\t\t\tLưu\n\t\t\t\t\t\t\t</Button>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal>\t\t\t\n\t\t\t\t</React.Fragment>\n\t\t\t\t</CSSTransitionGroup>\n\t\t);\n\t} // end render\n}\n\nexport default OrderActionPage;\n"]},"metadata":{},"sourceType":"module"}