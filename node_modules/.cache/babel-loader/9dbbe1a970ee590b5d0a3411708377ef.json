{"ast":null,"code":"import _classCallCheck from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Data/React/react-api/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Navbar from './components/Elements/Navbar';\nimport Sidebar from './components/Elements/Sidebar';\nimport Login from './pages/Login/Login';\nimport routes from './routes';\nimport { ISLOGIN } from './constants/config';\nimport { connect } from 'react-redux';\nimport { CSSTransitionGroup } from 'react-transition-group';\nimport * as config from './constants/config';\nimport Forbidden from './pages/NotFound/403_Forbidden'; // 403\n\nimport { findIndex } from 'lodash';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.isAuthenticated = function (location) {\n      var pages = [{\n        'page': '/'\n      }, {\n        'page': '/sms'\n      }, {\n        'page': '/products'\n      }, {\n        'page': '/orders'\n      }, {\n        'page': '/customers'\n      }, {\n        'page': '/category'\n      }];\n      var link = location.pathname;\n      console.log(typeof link, link);\n      var denied = false;\n      pages.map(function (page, index) {\n        console.log(typeof page.page, page.page);\n\n        if (link.indexOf(page.page) === -1) {// denied = true;\n        }\n      });\n      console.log(denied); // console.log(location);\n      // if( denied ){\n      // \treturn true;\n      // }\n\n      return false;\n    };\n\n    _this.showContentMenu = function (routes, location) {\n      var result = null;\n\n      if (_this.isAuthenticated(location)) {\n        return React.createElement(Route, {\n          exact: false,\n          path: \"/\",\n          component: Forbidden,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }); // ===> redirect to 403\n      }\n\n      if (routes.length > 0) {\n        result = routes.map(function (route, index) {\n          return React.createElement(Route, {\n            key: index,\n            path: route.path,\n            exact: route.exact,\n            component: route.main,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          });\n        });\n      }\n\n      return result;\n    };\n\n    _this.state = {\n      isLogin: ISLOGIN\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var ele = document.getElementById('ipl-progress-indicator');\n\n      if (ele) {\n        // fade out\n        ele.classList.add('available');\n        setTimeout(function () {\n          // remove from DOM\n          ele.outerHTML = '';\n        }, 100);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextprops) {\n      this.setState({\n        isLogin: nextprops.authentication.loggedIn\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.isLogin) {\n        return React.createElement(Router, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, React.createElement(Route, {\n          render: function render(_ref) {\n            var location = _ref.location;\n            return React.createElement(CSSTransitionGroup, {\n              transitionName: config.PAGETRANSITION,\n              transitionAppear: true,\n              transitionAppearTimeout: config.TRANSITIONSPEED,\n              transitionEnter: false,\n              transitionLeave: false,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 47\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"App\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 48\n              },\n              __self: this\n            }, React.createElement(Navbar, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 49\n              },\n              __self: this\n            }), React.createElement(\"div\", {\n              className: \"page-container row-fluid\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 50\n              },\n              __self: this\n            }, React.createElement(Sidebar, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 51\n              },\n              __self: this\n            }), React.createElement(\"div\", {\n              className: \"page-content container\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 52\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"content sm-gutter\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 53\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"page-title\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 54\n              },\n              __self: this\n            })), React.createElement(Switch, {\n              location: location,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 58\n              },\n              __self: this\n            }, _this2.showContentMenu(routes, location))))));\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(CSSTransitionGroup, {\n          transitionName: config.LOGINTRANSITION,\n          transitionAppear: true,\n          transitionAppearTimeout: config.TRANSITIONSPEED,\n          transitionEnter: false,\n          transitionLeave: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(Login, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    authentication: state.authentication\n  };\n}; // const mapDispatchToProps = (dispatch, props) => {\n// \treturn {\n// \t\tgetUsers : () => {\n// \t\t\tdispatch(actFetchUsersRequest());\n// \t\t},\n// \t\tonDeleteUser : (id) => {\n// \t\t\tdispatch(actDeleteUserRequest(id));\n// \t\t}\n// \t}\n// }\n\n\nexport default connect(mapStateToProps, null)(App);","map":{"version":3,"sources":["/Volumes/Data/React/react-api/src/App.js"],"names":["React","Component","BrowserRouter","Router","Route","Switch","Navbar","Sidebar","Login","routes","ISLOGIN","connect","CSSTransitionGroup","config","Forbidden","findIndex","App","props","isAuthenticated","location","pages","link","pathname","console","log","denied","map","page","index","indexOf","showContentMenu","result","length","route","path","exact","main","state","isLogin","ele","document","getElementById","classList","add","setTimeout","outerHTML","nextprops","setState","authentication","loggedIn","PAGETRANSITION","TRANSITIONSPEED","LOGINTRANSITION","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Navbar from './components/Elements/Navbar';\nimport Sidebar from './components/Elements/Sidebar';\nimport Login from './pages/Login/Login';\nimport routes from './routes';\nimport { ISLOGIN } from './constants/config';\nimport { connect } from 'react-redux';\nimport { CSSTransitionGroup } from 'react-transition-group'\nimport * as config from './constants/config';\nimport Forbidden from './pages/NotFound/403_Forbidden'; // 403\nimport {findIndex} from 'lodash';\n\nclass App extends Component {\n\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tisLogin : ISLOGIN\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tconst ele = document.getElementById('ipl-progress-indicator')\n\t\tif(ele){\n\t\t  // fade out\n\t\t  ele.classList.add('available')\n\t\t  setTimeout(() => {\n\t\t\t// remove from DOM\n\t\t\tele.outerHTML = ''\n\t\t  },100)\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextprops){\n\t\tthis.setState({\n\t\t\tisLogin: nextprops.authentication.loggedIn\n\t\t});\t\n\t}\n\n\trender() {\n\t\tif( this.state.isLogin ) {\n\t\t\treturn (\n\t\t\t\t<Router>\n\t\t\t\t\t<Route render={({ location }) => (\n\t\t\t\t\t\t<CSSTransitionGroup transitionName={config.PAGETRANSITION} transitionAppear={true} transitionAppearTimeout={config.TRANSITIONSPEED} transitionEnter={false} transitionLeave={false}>\n\t\t\t\t\t\t\t<div className=\"App\" >\n\t\t\t\t\t\t\t\t<Navbar/>\n\t\t\t\t\t\t\t\t<div className=\"page-container row-fluid\">\n\t\t\t\t\t\t\t\t\t<Sidebar/>\n\t\t\t\t\t\t\t\t\t<div className=\"page-content container\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"content sm-gutter\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"page-title\"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/* <div className=\"grid simple \">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid-body no-border\"> */}\n\t\t\t\t\t\t\t\t\t\t\t\t<Switch location={location}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.showContentMenu(routes,location)}\n\t\t\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t\t\t{/* </div>\n\t\t\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CSSTransitionGroup>\n\t\t\t\t\t)}/>\n\t\t\t\t</Router>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<CSSTransitionGroup transitionName={config.LOGINTRANSITION} transitionAppear={true} transitionAppearTimeout={config.TRANSITIONSPEED} transitionEnter={false} transitionLeave={false}>\n\t\t\t\t\t<Login />\n\t\t\t\t</CSSTransitionGroup>\n\t\t\t);\n\t\t}\n\t\t\n\t}\n\n\tisAuthenticated = (location) => {\n\t\tvar pages = [\n\t\t\t{ 'page': '/' },\n\t\t\t{ 'page': '/sms' },\n\t\t\t{ 'page': '/products' },\n\t\t\t{ 'page': '/orders' },\n\t\t\t{ 'page': '/customers' },\n\t\t\t{ 'page': '/category' }\n\t\t];\n\t\tvar link  = location.pathname;\n\t\tconsole.log(typeof link, link);\n\t\tvar denied = false;\n\t\tpages.map( (page, index) => {\n\t\t\tconsole.log(typeof page.page, page.page);\n\t\t\tif ( link.indexOf( page.page ) === -1 ) {\n\t\t\t\t// denied = true;\n\t\t\t}\n\t\t})\n\t\tconsole.log(denied);\n\t\t// console.log(location);\n\t\t// if( denied ){\n\t\t// \treturn true;\n\t\t// }\n\t\treturn false;\n\t}\n\n\tshowContentMenu = (routes,location) => {\n\t\tvar result = null;\n\t\tif(this.isAuthenticated(location)){\n\t\t\treturn <Route exact={false} path='/' component={Forbidden}/> // ===> redirect to 403\n\t\t}\n\t\tif(routes.length > 0){\n\t\t\tresult = routes.map((route, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Route \n\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\tpath={route.path} \n\t\t\t\t\t\texact={route.exact} \n\t\t\t\t\t\tcomponent={route.main} \n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})\n\t\t}\n\t\treturn result;\n\t}\n\t\n}\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tauthentication: state.authentication,\n\t}\n}\n\n// const mapDispatchToProps = (dispatch, props) => {\n// \treturn {\n// \t\tgetUsers : () => {\n// \t\t\tdispatch(actFetchUsersRequest());\n// \t\t},\n// \t\tonDeleteUser : (id) => {\n// \t\t\tdispatch(actDeleteUserRequest(id));\n// \t\t}\n// \t}\n// }\n\nexport default connect(mapStateToProps, null)(App);\n\n"]},"metadata":{},"sourceType":"module"}