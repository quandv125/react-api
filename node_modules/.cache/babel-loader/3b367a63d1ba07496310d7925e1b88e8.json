{"ast":null,"code":"import _defineProperty from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Volumes/Data/React/react-api/src/pages/Service/ServiceActionPage.js\";\nimport React, { Component } from 'react';\nimport { CSSTransitionGroup } from 'react-transition-group';\nimport Validator from 'react-forms-validator';\nimport { Link } from 'react-router-dom';\nimport * as config from '../../constants/config';\nimport callApi from '../../utils/apiCaller';\nimport Button from '@material-ui/core/Button';\n\nvar ServiceActionPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ServiceActionPage, _Component);\n\n  function ServiceActionPage(props) {\n    var _this;\n\n    _classCallCheck(this, ServiceActionPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ServiceActionPage).call(this, props));\n\n    _this.showCategory = function () {\n      var options = [];\n      var categories = _this.state.categories;\n      categories.map(function (data) {\n        return options.push(React.createElement(\"option\", {\n          key: data.id,\n          value: data.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, data.title));\n      });\n      return options;\n    };\n\n    _this.state = {\n      id: '',\n      title: '',\n      desc: '',\n      category_id: '',\n      categories: [],\n      submitted: false,\n      isFormValidationErrors: true\n    };\n    _this.handleFormSubmit = _this.handleFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.isValidationError = _this.isValidationError.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeFrom = _this.onChangeFrom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ServiceActionPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var match = this.props.match;\n\n      if (match) {\n        var id = match.params.id;\n        callApi('GET', config.SERVICE_URL + \"/\" + id, null).then(function (res) {\n          var data = res.data.data;\n\n          _this2.setState({\n            id: data.id,\n            title: data.title ? data.title : '',\n            desc: data.desc ? data.desc : ''\n          });\n        });\n      }\n\n      callApi('GET', config.CATEGORY_URL, null).then(function (res) {\n        _this2.setState({\n          category_id: res.data.data[0].id,\n          categories: res.data.data\n        });\n      });\n    }\n  }, {\n    key: \"onChangeFrom\",\n    value: function onChangeFrom(event) {\n      var target = event.target;\n      var name = target.name;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n      this.setState(_defineProperty({}, name, value));\n\n      if (name === 'category_id') {\n        console.log(value);\n      }\n    }\n  }, {\n    key: \"isValidationError\",\n    value: function isValidationError(flag) {\n      this.setState({\n        isFormValidationErrors: flag\n      });\n    }\n  }, {\n    key: \"handleFormSubmit\",\n    value: function handleFormSubmit(event) {\n      event.preventDefault();\n      this.setState({\n        submitted: true\n      });\n      var isFormValidationErrors = this.state.isFormValidationErrors;\n\n      if (!isFormValidationErrors) {\n        var history = this.props.history;\n        var _this$state = this.state,\n            id = _this$state.id,\n            title = _this$state.title,\n            desc = _this$state.desc;\n        var data = {\n          title: title,\n          desc: desc\n        };\n\n        if (id) {\n          //update\n          callApi('PUT', config.SERVICE_URL + \"/\" + id, data).then(function (res) {\n            history.push(\"/service\");\n          });\n        } else {\n          //create\n          callApi('POST', config.SERVICE_URL, data).then(function (res) {\n            history.goBack();\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(CSSTransitionGroup, {\n        transitionName: \"worksTransition\",\n        transitionAppear: true,\n        transitionAppearTimeout: 500,\n        transitionEnter: false,\n        transitionLeave: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"grid simple \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"grid-body no-border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/service\",\n        className: \"margin-right20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"submit\",\n        className: \"btn btn-primary btn-cons\",\n        variant: \"contained\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"arrow_back\"))), React.createElement(\"div\", {\n        className: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-lg-3 col-sm-3 col-xs-3 col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-lg-6 col-sm-6 col-xs-6 col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"title\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.title,\n        onChange: this.onChangeFrom,\n        name: \"title\",\n        placeholder: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(Validator, {\n        isValidationError: this.isValidationError,\n        isFormSubmitted: this.state.submitted,\n        reference: {\n          firstname: this.state.title\n        },\n        validationRules: {\n          required: true,\n          maxLength: 50\n        },\n        validationMessages: {\n          required: \"This field is required\",\n          maxLength: \"Not a valid Max length: 10 \"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"category_id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"D\\u1ECBch v\\u1EE5\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        name: \"category_id\",\n        value: this.state.category_id,\n        onChange: this.onChangeForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, this.showCategory()))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"desc\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.desc,\n        onChange: this.onChangeFrom,\n        name: \"desc\",\n        placeholder: \"desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(Validator, {\n        isValidationError: this.isValidationError,\n        isFormSubmitted: this.state.submitted,\n        reference: {\n          firstname: this.state.desc\n        },\n        validationRules: {\n          required: true\n        },\n        validationMessages: {\n          required: \"This field is required\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      })), React.createElement(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Save\"))))));\n    } // end render\n\n  }]);\n\n  return ServiceActionPage;\n}(Component);\n\nexport default ServiceActionPage;","map":{"version":3,"sources":["/Volumes/Data/React/react-api/src/pages/Service/ServiceActionPage.js"],"names":["React","Component","CSSTransitionGroup","Validator","Link","config","callApi","Button","ServiceActionPage","props","showCategory","options","categories","state","map","data","push","id","title","desc","category_id","submitted","isFormValidationErrors","handleFormSubmit","bind","isValidationError","onChangeFrom","match","params","SERVICE_URL","then","res","setState","CATEGORY_URL","event","target","name","value","type","checked","console","log","flag","preventDefault","history","goBack","firstname","required","maxLength","onChangeForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { CSSTransitionGroup } from 'react-transition-group';\nimport Validator from 'react-forms-validator';\nimport { Link } from 'react-router-dom';\nimport * as config from '../../constants/config';\nimport callApi from '../../utils/apiCaller';\nimport Button from '@material-ui/core/Button';\n\nclass ServiceActionPage extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tid: '',\n\t\t\ttitle: '',\n\t\t\tdesc: '',\n\t\t\tcategory_id: '', \n\t\t\tcategories: [],\n\t\t\tsubmitted: false,\n\t\t\tisFormValidationErrors : true\n\t\t};\n\t\tthis.handleFormSubmit = this.handleFormSubmit.bind(this);\n\t\tthis.isValidationError = this.isValidationError.bind(this);\n\t\tthis.onChangeFrom = this.onChangeFrom.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tvar {match} = this.props;\n\t\tif(match) {\n\t\t\tvar id = match.params.id;\n\t\t\tcallApi('GET', config.SERVICE_URL + \"/\" + id, null).then(res => {\n\t\t\t\tvar data = res.data.data;\n\t\t\t\tthis.setState({\n\t\t\t\t\tid: data.id,\n\t\t\t\t\ttitle: data.title ? data.title : '',\n\t\t\t\t\tdesc: data.desc ? data.desc : ''\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tcallApi('GET', config.CATEGORY_URL, null).then(res => {\n\t\t\tthis.setState({\n\t\t\t\tcategory_id: res.data.data[0].id,\n\t\t\t\tcategories: res.data.data\n\t\t\t});\n\t\t});\n\t}\n\n\tshowCategory = () => {\n\t\tconst options = [];\n\t\tconst {categories} = this.state;\n\t\tcategories.map(data => options.push(\n\t\t\t<option key={data.id} value={data.id}>{data.title}</option>\n\t\t));\n\t\treturn options;\n\t}\n\n\tonChangeFrom (event) {\n\t\tvar target = event.target;\n\t\tvar name = target.name;\n\t\tvar value = target.type === 'checkbox'? target.checked:target.value;\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\t\tif(name === 'category_id'){\n\t\t\tconsole.log(value);\n\t\t}\n\t}\n\n\tisValidationError(flag){\n\t\tthis.setState({isFormValidationErrors:flag});\n\t}\n\n\thandleFormSubmit (event) {\n\t\tevent.preventDefault();\n\t\tthis.setState( { submitted:true } );\n\t\tlet { isFormValidationErrors } = this.state;\n\t\tif ( !isFormValidationErrors ){\n\t\t\tvar {history} = this.props;\n\t\t\tvar {id, title, desc} = this.state;\n\t\t\tvar data = { title: title, desc: desc };\n\t\t\tif( id ) { //update\n\t\t\t\tcallApi('PUT', config.SERVICE_URL  + \"/\" + id, data).then( res => {\n\t\t\t\t\thistory.push(\"/service\");\n\t\t\t\t});\n\t\t\t} else { //create\n\t\t\t\tcallApi('POST', config.SERVICE_URL, data ).then( res => {\n\t\t\t\t\thistory.goBack();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\n\t\t\t<CSSTransitionGroup transitionName=\"worksTransition\" transitionAppear={true} transitionAppearTimeout={500} transitionEnter={false} transitionLeave={false}>\n\n\t\t\t\t<div className=\"grid simple \">\n\t\t\t\t\t<div className=\"grid-body no-border\">\n\t\t\t\t\t\t<Link to=\"/service\" className=\"margin-right20\">\n\t\t\t\t\t\t\t<Button type=\"submit\" className=\"btn btn-primary btn-cons\" variant=\"contained\" color=\"primary\">\n\t\t\t\t\t\t\t<i className=\"material-icons\">arrow_back</i>\n\t\t\t\t\t\t\t</Button>\t\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<div className=\"clearfix\"></div>\n\t\t\t\t\t\t<div className=\"col-lg-3 col-sm-3 col-xs-3 col-md-3\"></div>\n\t\t\t\t\t\t<div className=\"col-lg-6 col-sm-6 col-xs-6 col-md-6\">\n\t\t\t\t\t\t\t<form noValidate onSubmit={this.handleFormSubmit}>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<label>title</label>\n\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\t\t\t\tvalue={this.state.title} \n\t\t\t\t\t\t\t\t\t\tonChange={this.onChangeFrom} \n\t\t\t\t\t\t\t\t\t\tname=\"title\" \n\t\t\t\t\t\t\t\t\t\tplaceholder=\"title\"/>\n\t\t\t\t\t\t\t\t\t<Validator \n\t\t\t\t\t\t\t\t\t\tisValidationError={this.isValidationError}\n\t\t\t\t\t\t\t\t\t\tisFormSubmitted={this.state.submitted} \n\t\t\t\t\t\t\t\t\t\treference={{firstname : this.state.title}}\n\t\t\t\t\t\t\t\t\t\tvalidationRules={{required:true, maxLength:50}} \n\t\t\t\t\t\t\t\t\t\tvalidationMessages={{ required: \"This field is required\", maxLength: \"Not a valid Max length: 10 \"}}/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"category_id\">\n\t\t\t\t\t\t\t\t\t\t\t<label>Dịch vụ</label>\n\t\t\t\t\t\t\t\t\t\t\t<select \n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\t\t\t\t\t\tname=\"category_id\" \n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.category_id} \n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.onChangeForm}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.showCategory()}\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<label>desc</label>\n\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\t\t\t\tvalue={this.state.desc} \n\t\t\t\t\t\t\t\t\t\tonChange={this.onChangeFrom} \n\t\t\t\t\t\t\t\t\t\tname=\"desc\" \n\t\t\t\t\t\t\t\t\t\tplaceholder=\"desc\"/>\n\t\t\t\t\t\t\t\t\t<Validator \n\t\t\t\t\t\t\t\t\t\tisValidationError={this.isValidationError}\n\t\t\t\t\t\t\t\t\t\tisFormSubmitted={this.state.submitted} \n\t\t\t\t\t\t\t\t\t\treference={{firstname : this.state.desc}}\n\t\t\t\t\t\t\t\t\t\tvalidationRules={{required:true }} \n\t\t\t\t\t\t\t\t\t\tvalidationMessages={{ required: \"This field is required\"}}/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" color=\"primary\">Save</Button>\n\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CSSTransitionGroup>\n\t\t);\n\t} // end render\n\n\t\n}\n\nexport default ServiceActionPage;\n"]},"metadata":{},"sourceType":"module"}