{"ast":null,"code":"import _defineProperty from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Volumes/Data/React/react-api/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Volumes/Data/React/react-api/src/pages/Invoice/InvoiceInfo.js\";\nimport React, { Component } from 'react';\nimport { CSSTransitionGroup } from 'react-transition-group';\nimport { Link } from 'react-router-dom';\nimport * as config from './../../constants/config';\nimport callApi from './../../utils/apiCaller';\nimport Cleave from 'cleave.js/react';\nimport Button from '@material-ui/core/Button';\nimport Validator from 'react-forms-validator';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { ToastContainer, toast } from 'react-toastify'; // Note: include <ToastContainer/>\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport ModalCalling from './../../components/Customers/ModalCalling';\n\nvar InvoiceInfo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InvoiceInfo, _Component);\n\n  function InvoiceInfo(props) {\n    var _this;\n\n    _classCallCheck(this, InvoiceInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InvoiceInfo).call(this, props));\n\n    _this.getServiceByCategoryID = function (id) {\n      callApi('GET', config.SERVICE_URL + \"/get-service-by-category/\" + id, null).then(function (res) {\n        if (res && res.data.status) {\n          _this.setState({\n            services: res.data.data\n          });\n        }\n      });\n    };\n\n    _this.onChangeForm = function (event) {\n      var target = event.target;\n      var name = target.name;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n\n      if (name === 'category_id') {\n        _this.getServiceByCategoryID(value);\n      }\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        var value = event.target.type === 'checkbox' ? event.target.checked : event.target.value;\n\n        _this.setState(_defineProperty({}, name, value));\n      };\n    };\n\n    _this.priceVal = function (price) {\n      return parseFloat(price.replace(/[^0-9-.]/g, ''));\n    };\n\n    _this.showCategory = function () {\n      var options = [];\n      var categories = _this.state.categories;\n      categories.map(function (data) {\n        return options.push(React.createElement(\"option\", {\n          key: data.id,\n          value: data.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, data.title));\n      });\n      return options;\n    };\n\n    _this.showService = function () {\n      var options = [];\n      var services = _this.state.services;\n      services.map(function (data) {\n        return options.push(React.createElement(\"option\", {\n          key: data.id,\n          value: data.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, data.title));\n      });\n      return options;\n    };\n\n    _this.state = {\n      categories: [],\n      services: [],\n      id: '',\n      sku: '',\n      title: '',\n      price: '',\n      price_max: '',\n      currency: '',\n      category_id: '25',\n      service_id: '19',\n      unit: '',\n      quantity: 0,\n      time: '',\n      submitted: false,\n      isFormValidationErrors: true,\n      is_publish: false\n    };\n    _this.handleFormSubmit = _this.handleFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.isValidationError = _this.isValidationError.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(InvoiceInfo, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var match = this.props.match;\n      var id = match.params.id;\n      console.log(id);\n\n      if (!match) {\n        callApi('GET', config.CATEGORY_URL, null).then(function (res) {\n          if (res && res.data.status) {\n            _this2.setState({\n              category_id: res.data.data[0].id,\n              categories: res.data.data\n            });\n\n            _this2.getServiceByCategoryID(res.data.data[0].id);\n          }\n        });\n      } else {\n        callApi('GET', config.CATEGORY_URL, null).then(function (res) {\n          if (res && res.data.status) {\n            _this2.setState({\n              categories: res.data.data\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"isValidationError\",\n    value: function isValidationError(flag) {\n      this.setState({\n        isFormValidationErrors: flag\n      });\n    }\n  }, {\n    key: \"handleFormSubmit\",\n    value: function handleFormSubmit(event) {\n      event.preventDefault();\n      this.setState({\n        submitted: true\n      });\n      var isFormValidationErrors = this.state.isFormValidationErrors;\n\n      if (!isFormValidationErrors) {\n        // var {history} = this.props;\n        var _this$state = this.state,\n            id = _this$state.id,\n            sku = _this$state.sku,\n            title = _this$state.title,\n            price = _this$state.price,\n            price_max = _this$state.price_max,\n            quantity = _this$state.quantity,\n            unit = _this$state.unit,\n            is_publish = _this$state.is_publish,\n            category_id = _this$state.category_id,\n            service_id = _this$state.service_id,\n            currency = _this$state.currency,\n            note = _this$state.note,\n            time = _this$state.time;\n        var data = {\n          sku: sku,\n          title: title,\n          price: this.priceVal(price),\n          price_max: this.priceVal(price_max),\n          quantity: quantity,\n          service_id: service_id,\n          category_id: category_id,\n          time: time,\n          currency: currency,\n          note: note,\n          unit: unit,\n          is_publish: is_publish ? true : false\n        }; // console.log(data);return;\n\n        if (id) {\n          //update\n          callApi('PUT', config.PRODUCT_URL + \"/\" + id, data).then(function (res) {\n            console.log(res);\n            toast.success(\"Cập nhật sản phẩm thành công\", {\n              position: \"top-right\",\n              hideProgressBar: false,\n              closeOnClick: true\n            }); // history.push(\"/products\");\n          });\n        } else {\n          //create\n          callApi('POST', config.PRODUCT_URL, data).then(function (res) {\n            toast.success(\"Thêm mới sản phẩm thành công !\", {\n              position: \"top-right\",\n              hideProgressBar: false,\n              closeOnClick: true\n            }); //C1 // history.push(\"/products-list\");\n            // console.log(res);\n            // history.push(\"/products\");\n            //C2: redirect \n            // history.goBack();\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(CSSTransitionGroup, {\n        transitionName: config.PAGETRANSITION,\n        transitionAppear: true,\n        transitionAppearTimeout: config.TRANSITIONSPEED,\n        transitionEnter: false,\n        transitionLeave: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"grid simple \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"grid-body no-border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(ModalCalling, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(Link, {\n        to: \"/orders\",\n        className: \"margin-right20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"submit\",\n        className: \"btn btn-primary btn-cons\",\n        variant: \"contained\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"arrow_back\"))), React.createElement(ToastContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }))));\n    } // end render\n\n  }]);\n\n  return InvoiceInfo;\n}(Component);\n\nexport default InvoiceInfo;","map":{"version":3,"sources":["/Volumes/Data/React/react-api/src/pages/Invoice/InvoiceInfo.js"],"names":["React","Component","CSSTransitionGroup","Link","config","callApi","Cleave","Button","Validator","Checkbox","ToastContainer","toast","ModalCalling","InvoiceInfo","props","getServiceByCategoryID","id","SERVICE_URL","then","res","data","status","setState","services","onChangeForm","event","target","name","value","type","checked","handleChange","priceVal","price","parseFloat","replace","showCategory","options","categories","state","map","push","title","showService","sku","price_max","currency","category_id","service_id","unit","quantity","time","submitted","isFormValidationErrors","is_publish","handleFormSubmit","bind","isValidationError","match","params","console","log","CATEGORY_URL","flag","preventDefault","note","PRODUCT_URL","success","position","hideProgressBar","closeOnClick","PAGETRANSITION","TRANSITIONSPEED"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { CSSTransitionGroup } from 'react-transition-group';\nimport { Link } from 'react-router-dom';\nimport * as config from './../../constants/config';\nimport callApi from './../../utils/apiCaller';\nimport Cleave from 'cleave.js/react';\nimport Button from '@material-ui/core/Button';\nimport Validator from 'react-forms-validator';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { ToastContainer, toast } from 'react-toastify';\n// Note: include <ToastContainer/>\nimport 'react-toastify/dist/ReactToastify.css';\nimport ModalCalling from './../../components/Customers/ModalCalling';\n\nclass InvoiceInfo extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcategories: [],\n\t\t\tservices: [],\n\t\t\tid: '',\n\t\t\tsku: '',\n\t\t\ttitle: '',\n\t\t\tprice: '',\n\t\t\tprice_max: '',\n\t\t\tcurrency: '',\n\t\t\tcategory_id: '25',\n\t\t\tservice_id: '19',\n\t\t\tunit: '',\n\t\t\tquantity: 0,\n\t\t\ttime: '',\n\t\t\tsubmitted: false,\n\t\t\tisFormValidationErrors : true,\n\t\t\tis_publish: false\n\t\t};\n\t\tthis.handleFormSubmit = this.handleFormSubmit.bind(this);\n\t\tthis.isValidationError = this.isValidationError.bind(this);\n\t}\n\n\tcomponentWillMount(){\n        var {match} = this.props;\n        var id = match.params.id;\n        console.log(id);\n\t\tif(!match) {\n\t\t\tcallApi('GET', config.CATEGORY_URL, null).then(res => {\n\t\t\t\tif(res && res.data.status){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcategory_id: res.data.data[0].id,\n\t\t\t\t\t\tcategories: res.data.data\n\t\t\t\t\t});\n\t\t\t\t\tthis.getServiceByCategoryID(res.data.data[0].id);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tcallApi('GET', config.CATEGORY_URL, null).then(res => {\n\t\t\t\tif(res && res.data.status){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcategories: res.data.data\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\n\n\tgetServiceByCategoryID = (id) => {\n\t\tcallApi('GET', config.SERVICE_URL + \"/get-service-by-category/\"+ id, null).then(res => {\n\t\t\tif(res && res.data.status){\n\t\t\t\tthis.setState({\n\t\t\t\t\tservices: res.data.data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonChangeForm = (event) => {\n\t\tvar target = event.target;\n\t\tvar name = target.name;\n\t\tvar value = target.type === 'checkbox'? target.checked:target.value;\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\n\t\tif(name === 'category_id'){\n\t\t\tthis.getServiceByCategoryID(value);\n\t\t}\n\t}\n\n\thandleChange = name => event => {\n\t\tvar value = event.target.type === 'checkbox'? event.target.checked : event.target.value;\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\t};\n\n\tpriceVal = (price) => {\n\t\treturn parseFloat(price.replace(/[^0-9-.]/g, ''));\n\t};\n\n\tisValidationError(flag){\n\t\tthis.setState({isFormValidationErrors:flag});\n\t}\n\t   \n\thandleFormSubmit (event) {\n\t\tevent.preventDefault();\n\t\tthis.setState( { submitted:true } );\n\t\tlet { isFormValidationErrors } = this.state;\n\t\tif ( !isFormValidationErrors ){\n\t\t\t// var {history} = this.props;\n\t\t\tvar {id, sku, title, price, price_max, quantity, unit, is_publish, category_id, service_id,currency, note, time} = this.state;\n\t\t\tvar data = {sku: sku, title: title, price: this.priceVal(price),price_max: this.priceVal(price_max), quantity: quantity,  service_id: service_id,  category_id: category_id, time: time,currency: currency, note: note, unit: unit, is_publish: is_publish ? true : false };\n\t\t\t// console.log(data);return;\n\t\t\tif(id) { //update\n\t\t\t\tcallApi('PUT', config.PRODUCT_URL  + \"/\" + id, data).then( res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\ttoast.success(\"Cập nhật sản phẩm thành công\", { position: \"top-right\", hideProgressBar: false,\tcloseOnClick: true });\n\t\t\t\t\t// history.push(\"/products\");\n\t\t\t\t});\n\t\t\t} else { //create\n\t\t\t\tcallApi('POST', config.PRODUCT_URL, data ).then( res => {\n\t\t\t\t\ttoast.success(\"Thêm mới sản phẩm thành công !\", { position: \"top-right\", hideProgressBar: false,\tcloseOnClick: true });\n\t\t\t\t\t//C1 // history.push(\"/products-list\");\n\t\t\t\t\t// console.log(res);\n\t\t\t\t\t// history.push(\"/products\");\n\t\t\t\t\t//C2: redirect \n\t\t\t\t\t// history.goBack();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\t\n\t\treturn (\n\t\t\t<CSSTransitionGroup transitionName={config.PAGETRANSITION} transitionAppear={true} transitionAppearTimeout={config.TRANSITIONSPEED} transitionEnter={false} transitionLeave={false}>\n\n\t\t\t\t<div className=\"grid simple \">\n\t\t\t\t\t<div className=\"grid-body no-border\">\n\t\t\t\t\t<ModalCalling />\n\t\t\t\t\t\t<Link to=\"/orders\" className=\"margin-right20\">\n\t\t\t\t\t\t\t<Button type=\"submit\" className=\"btn btn-primary btn-cons\" variant=\"contained\" color=\"primary\">\n\t\t\t\t\t\t\t<i className=\"material-icons\">arrow_back</i>\n\t\t\t\t\t\t\t</Button>\t\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\n\t\t\t\t\t\t<ToastContainer />\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CSSTransitionGroup>\n\t\t);\n\t} // end render\n\n\tshowCategory = () => {\n\t\tconst options = [];\n\t\tconst {categories} = this.state;\n\t\tcategories.map(data => options.push(\n\t\t\t<option key={data.id} value={data.id}>{data.title}</option>\n\t\t));\n\t\treturn options;\n\t}\n\n\tshowService = () => {\n\t\tconst options = [];\n\t\tconst {services} = this.state;\n\t\tservices.map(data => options.push(\n\t\t\t<option key={data.id} value={data.id}>{data.title}</option>\n\t\t));\n\t\treturn options;\n\t}\n\n}\n\nexport default InvoiceInfo;\n"]},"metadata":{},"sourceType":"module"}